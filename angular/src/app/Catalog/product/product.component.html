<p-panel header="Danh sách sản phẩm">
  <!-- filter-->
  <div class="grid">
    <div class="col-4">
      <p-button icon="pi pi-plus" label="Thêm mới" (onClick)="showAddModel()"></p-button>
      <p-button
        label="Delete Multiple"
        [rounded]="true"
        *ngIf="selectedItems.length > 0"
        icon="pi pi-minus"
        severity="secondary"
        (onClick)="DeleteListItems()"
      ></p-button>
    </div>

    <div class="col-8">
      <p-dropdown
        [options]="productCategorise"
        [(ngModel)]="categoryId"
        optionLabel="name"
        [showClear]="true"
        placeholder="Chọn loại sản phẩm"
      ></p-dropdown>
      <span class="p-input-icon-left">
        <i class="pi pi-search"></i>
        <input type="text" pInputText [(ngModel)]="keyword" placeholder="Search by name" />
      </span>

      <p-button
        label="Tìm kiếm"
        [rounded]="true"
        severity="secondary"
        (onClick)="loadData()"
      ></p-button>
    </div>
  </div>

  <!-- table-->

  <div #pnl class="card">
    <p-table
      [value]="items"
      [tableStyle]="{ 'min-width': '60rem' }"
      [(selection)]="selectedItems"
      selectionMode="multiple"
    >
      <ng-template pTemplate="caption">
        <div class="flex align-items-center justify-content-between">Products</div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th><p-tableHeaderCheckbox></p-tableHeaderCheckbox></th>
          <th>Tên</th>
          <th>Ảnh</th>
          <th>Mã</th>
          <th>Loại</th>
          <th>Danh mục</th>
          <th>SKU</th>
          <th>Thứ tự</th>
          <th>Hiển thị</th>
          <th>Kích hoạt</th>
          <th></th>
          <th>Action</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product>
        <tr [pSelectableRow]="product">
          <td><p-tableCheckbox [value]="product"></p-tableCheckbox></td>
          <td>{{ product.name }}</td>
          <td>
            <!-- <img
              [src]="'https://primefaces.org/cdn/primeng/images/demo/product/' + product.image"
              [alt]="product.name"
              width="100"
              class="shadow-4"
            /> -->
            {{ product.thumbnailPicture }}
          </td>
          <td>{{ product.code }}</td>
          <!-- <td>{{ product.productType }}</td> -->
          <td>{{ getProductTypeName(product.productType) }}</td>
          <td>{{ product.categoryId }}</td>
          <td>{{ product.sku }}</td>
          <td>{{ product.sortOrder }}</td>
          <td>{{ product.visibility }}</td>
          <td>{{ product.isActive }}</td>
          <td>
            <button
              pButton
              pRipple
              type="button"
              label="Thuộc tính"
              icon="fa fa-pencil"
              class="p-button-text"
              (click)="manageProductAttribute(product.id)"
            ></button>
          </td>
          <td>
            <p-button
              icon="pi pi-file-edit"
              label="sua"
              (onClick)="showEditModel(product.id)"
            ></p-button>
            <p-button
              icon="pi pi-delete-left"
              label="Xoa"
              (onClick)="DeleteProduct(product.id)"
            ></p-button>
          </td>

          <!-- <td>{{ product.price | currency : 'USD' }}</td>
          <td>{{ product.category }}</td>
          <td>
            <p-rating [ngModel]="product.rating" [readonly]="true" [cancel]="false"></p-rating>
          </td>
          <td>
            <p-tag
              [value]="product.inventoryStatus"
              [severity]="getSeverity(product.inventoryStatus)"
            ></p-tag>
          </td> -->
        </tr>
      </ng-template>
      <ng-template pTemplate="summary">
        <div class="flex align-items-center justify-content-between">
          In total there are {{ totalCount }} products.
        </div>
      </ng-template>
    </p-table>
  </div>

  <!-- page-->

  <p-paginator
    [rows]="maxResultCount"
    [totalRecords]="totalCount"
    [rowsPerPageOptions]="[10, 20, 30, 40, 50]"
    (onPageChange)="pageChanged($event)"
  ></p-paginator>
  <!-- block ui-->

  <p-blockUI [blocked]="blockedPanel" [target]="pnl">
    <p-progressSpinner ariaLabel="loading"></p-progressSpinner>
  </p-blockUI>
</p-panel>
